(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{1176:(e,t,a)=>{Promise.resolve().then(a.t.bind(a,3673,23)),Promise.resolve().then(a.bind(a,1732))},1732:(e,t,a)=>{"use strict";a.d(t,{CalendarProvider:()=>_,_:()=>I});var n=a(2115),l=a(2078);let d=(0,l.Dk)().length?(0,l.Sx)():(0,l.Wp)({apiKey:"AIzaSyD7_XOXmHNRH8vVtRQdODbsS5cEG2kYN_U",authDomain:"naayduwa.firebaseapp.com",projectId:"naayduwa",storageBucket:"naayduwa.firebasestorage.app",messagingSenderId:"641198466977",appId:"1:641198466977:web:4689ca314da4076f558de0"});var r=a(9708);let o=(0,r.aU)(d),s="events";async function u(e){let t=(0,r.H9)((0,r.rJ)(o,s),e.id);await (0,r.BN)(t,{...e,updatedAt:r.Dc.fromMillis(Date.now())})}async function i(e){await (0,r.kd)((0,r.H9)(o,s,e))}async function c(e,t){var a;let n=(0,r.H9)(o,s,e),l=await (0,r.x7)(n);if(!l.exists())return;let d=[...null!=(a=l.data().attendees)?a:[],t];await (0,r.mZ)(n,{attendees:d,updatedAt:r.Dc.fromMillis(Date.now())})}async function E(e,t){var a;let n=(0,r.H9)(o,s,e),l=await (0,r.x7)(n);if(!l.exists())return;let d=(null!=(a=l.data().attendees)?a:[]).filter(e=>e.id!==t);await (0,r.mZ)(n,{attendees:d,updatedAt:r.Dc.fromMillis(Date.now())})}let p="naayduwa:calendar";function D(e){localStorage.setItem(p,JSON.stringify(e))}function m(e){return e.toISOString().slice(0,10)}function y(e){return m(new Date(Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),1)))}let f=m(new Date),T=function(e){let t=localStorage.getItem(p);return t?JSON.parse(t):e}({monthCursorISO:y(new Date),selectedDateISO:f,events:[],modal:{addEventOpen:!1},toastMessage:null});function v(e,t){switch(t.type){case"INIT_EVENTS":{let a={...e,events:t.payload};return D(a),a}case"NAV_MONTH":{let a=new Date(e.monthCursorISO+"T00:00:00Z");a.setUTCMonth(a.getUTCMonth()+t.payload);let n=y(a),l={...e,monthCursorISO:n};return D(l),l}case"SET_SELECTED_DATE":{let a={...e,selectedDateISO:t.payload};return D(a),a}case"OPEN_ADD_EVENT":{let a={...e,modal:{...e.modal,addEventOpen:!0},selectedDateISO:t.payload};return D(a),a}case"CLOSE_ADD_EVENT":{let t={...e,modal:{...e.modal,addEventOpen:!1}};return D(t),t}case"ADD_EVENT":{u(t.payload);let a={...e,modal:{...e.modal,addEventOpen:!1}};return D(a),a}case"OPEN_DETAILS":{let a={...e,modal:{...e.modal,detailsEventId:t.payload}};return D(a),a}case"CLOSE_DETAILS":{let t={...e,modal:{...e.modal,detailsEventId:void 0}};return D(t),t}case"ADD_ATTENDEE":return c(t.payload.eventId,t.payload.attendee),e;case"REMOVE_ATTENDEE":return E(t.payload.eventId,t.payload.attendeeId),e;case"DELETE_EVENT":{i(t.payload.eventId);let a={...e,modal:{...e.modal,detailsEventId:void 0}};return D(a),a}case"UPDATE_EVENT":{u(t.payload.event);let a=e.events.map(e=>e.id===t.payload.event.id?t.payload.event:e),n={...e,events:a};return D(n),n}case"SHOW_TOAST":{let a={...e,toastMessage:t.payload};return D(a),a}case"CLEAR_TOAST":{let t={...e,toastMessage:null};return D(t),t}default:return e}}let S=(0,n.createContext)(null);function _(e){let{children:t}=e,[a,l]=(0,n.useReducer)(v,T);n.useEffect(()=>{let e=function(e){let t=(0,r.P)((0,r.rJ)(o,s),(0,r.My)("dateISO"),(0,r.My)("startTime"));return(0,r.aQ)(t,t=>{let a=[];t.forEach(e=>{let t,n=e.data(),l=n.updatedAt;t="number"==typeof l?l:l&&"function"==typeof l.toMillis?l.toMillis():Date.now(),a.push({...n,id:e.id,updatedAt:t})}),e(a)})}(e=>{l({type:"INIT_EVENTS",payload:e})});return()=>e()},[]);let d=(0,n.useMemo)(()=>({state:a,dispatch:l}),[a]);return n.createElement(S.Provider,{value:d},t)}function I(){let e=(0,n.useContext)(S);if(!e)throw Error("useCalendar must be used within CalendarProvider");return e}},3673:()=>{}},e=>{e.O(0,[978,135,736,441,255,358],()=>e(e.s=1176)),_N_E=e.O()}]);