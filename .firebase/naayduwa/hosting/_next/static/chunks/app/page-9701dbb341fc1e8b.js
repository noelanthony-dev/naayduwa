(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{831:(e,t,a)=>{"use strict";a.d(t,{default:()=>x});var l=a(5155),s=a(4465),n=a(4046),r=a(2115);function d(e){let[t,a,l]=e.split("-").map(Number),s=new Date(Date.UTC(t,(null!=a?a:1)-1,null!=l?l:1));return new Intl.DateTimeFormat("en-US",{weekday:"short",month:"short",day:"numeric",timeZone:"UTC"}).format(s)}function i(e){if(!e)return"";let[t,a]=e.split(":").map(Number);return"".concat((t+11)%12+1,":").concat(String(a).padStart(2,"0")," ").concat(t>=12?"PM":"AM")}let o=Array.from({length:12},(e,t)=>String(t+1).padStart(2,"0")),c=["00","30"],m=["AM","PM"];function u(e){if(!e)return{h12:"06",m:"00",ampm:"PM"};let[t,a]=e.split(":"),l=Number(t);return{h12:String((l+11)%12+1).padStart(2,"0"),m:c.includes(a)?a:"00",ampm:l>=12?"PM":"AM"}}function h(e,t,a){let l=Number(e);return"PM"===a&&12!==l&&(l+=12),"AM"===a&&12===l&&(l=0),"".concat(String(l).padStart(2,"0"),":").concat(t)}function p(e){let[t,a]=e.split(":").map(Number);return 60*t+a}function x(){var e,t,a;let{state:x,dispatch:v}=(0,n._)(),g=!!x.modal.detailsEventId,b=(0,r.useMemo)(()=>x.events.find(e=>e.id===x.modal.detailsEventId),[x.events,x.modal.detailsEventId]),[f,N]=(0,r.useState)(!1),[j,E]=(0,r.useState)(""),[y,w]=(0,r.useState)("confirmed"),[S,C]=(0,r.useState)(!1),[T,D]=(0,r.useState)({open:!1}),[O,A]=(0,r.useState)(!1),[I,_]=(0,r.useState)(""),[k,M]=(0,r.useState)(""),[U,P]=(0,r.useState)("06"),[L,V]=(0,r.useState)("00"),[H,R]=(0,r.useState)("PM"),[z,W]=(0,r.useState)("07"),[F,Z]=(0,r.useState)("00"),[B,J]=(0,r.useState)("PM");if((0,r.useEffect)(()=>{var e,t;if(A(!1),!b)return;_(null!=(e=b.court)?e:""),M(null!=(t=b.notes)?t:"");let a=u(b.startTime);P(a.h12),V(a.m),R(a.ampm);let l=u(b.endTime);W(l.h12),Z(l.m),J(l.ampm)},[null==b?void 0:b.id,g]),!g||!b)return null;let K=b.attendees.length,q=h(U,L,H),Q=h(z,F,B),X=Q&&p(Q)<=p(q);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(s.A,{open:g,onClose:()=>v({type:"CLOSE_DETAILS"}),children:(0,l.jsx)("div",{className:"w-full max-w-[100vw] h-[100dvh] overflow-x-hidden rounded-none bg-[#1E1E2E] md:w-[720px] md:max-w-[720px] md:h-auto md:max-h-[80vh] md:rounded-2xl md:overflow-hidden",children:(0,l.jsxs)("div",{className:"flex h-full flex-col",children:[(0,l.jsxs)("div",{className:"sticky top-0 z-10 flex items-center justify-between border-b border-white/10 bg-[#1E1E2E] px-4 py-3 md:px-6 md:py-4",children:[(0,l.jsx)("div",{className:"text-base sm:text-lg font-semibold text-fg",children:d(b.dateISO)}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[O?(0,l.jsx)("button",{"aria-label":"Save changes",title:"Save changes",onClick:()=>{X||(v({type:"UPDATE_EVENT",payload:{event:{...b,court:I.trim(),notes:k.trim()||void 0,startTime:q,...void 0===b.endTime&&!Q?{}:Q?{endTime:Q}:{endTime:void 0},updatedAt:Date.now()}}}),A(!1),v({type:"SHOW_TOAST",payload:"Event updated"}),setTimeout(()=>v({type:"CLEAR_TOAST"}),2e3))},className:"h-8 px-3 grid place-items-center rounded-md bg-primary/20 text-primary hover:bg-primary/30 text-sm disabled:opacity-50",disabled:!!X,children:"Save"}):(0,l.jsx)("button",{"aria-label":"Edit event",title:"Edit event",onClick:()=>A(!0),className:"h-10 w-10 grid place-items-center rounded-md bg-[#1E1E2E] border border-white/10 text-fg/80 hover:bg-white/10",children:(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"h-5 w-5",children:(0,l.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zm3.92 2.33H5v-1.92L14.06 7.52l1.92 1.92L6.92 19.58zM20.71 7.04a1 1 0 0 0 0-1.41l-2.34-2.34a1 1 0 0 0-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"})})}),(0,l.jsx)("button",{"aria-label":"Delete event",title:"Delete event",onClick:()=>C(!0),className:"h-10 w-10 grid place-items-center rounded-md bg-[#1E1E2E] border border-white/10 text-fg/80 hover:bg-white/10",children:(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"h-5 w-5",children:(0,l.jsx)("path",{d:"M9 3a1 1 0 0 0-1 1v1H5.5a1 1 0 1 0 0 2H6v11a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V7h.5a1 1 0 1 0 0-2H16V4a1 1 0 0 0-1-1H9zm2 2h4V4h-4v1zM8 7h10v11a1 1 0 0 1-1 1H8a1 1 0 0 1-1-1V7zm3 3a1 1 0 1 0-2 0v7a1 1 0 1 0 2 0v-7zm5 0a1 1 0 1 0-2 0v7a1 1 0 1 0 2 0v-7z"})})}),(0,l.jsx)("button",{"aria-label":"Close",onClick:()=>v({type:"CLOSE_DETAILS"}),className:"h-10 w-10 grid place-items-center rounded-md bg-[#1E1E2E] border border-white/10 text-fg/80 hover:bg-white/10",children:"\xd7"})]})]}),(0,l.jsx)("div",{className:"flex-1 overflow-y-auto px-4 py-4 md:px-6 md:py-6",children:(0,l.jsxs)("div",{className:"rounded-xl bg-black border border-white/10 p-4 md:p-6",children:[(0,l.jsxs)("div",{className:"mb-3 space-y-1",children:[O?(0,l.jsx)("input",{className:"input",value:I,onChange:e=>_(e.target.value),placeholder:"Court"}):(0,l.jsx)("div",{className:"text-lg sm:text-xl font-semibold text-fg",children:null!=(e=b.court)?e:"Event"}),O?(0,l.jsx)("input",{className:"input",value:k,onChange:e=>M(e.target.value),placeholder:"Notes"}):b.notes?(0,l.jsx)("div",{className:"text-sm text-fg/70",children:b.notes}):null]}),!O&&(b.startTime||b.endTime)&&(0,l.jsx)("div",{className:"mb-4 flex items-center gap-2",children:(0,l.jsxs)("div",{className:"rounded-xl border-2 border-primary/60 bg-black px-3 py-1.5 text-primary font-semibold text-base leading-none",children:[i(b.startTime),b.endTime?" – ".concat(i(b.endTime)):""]})}),O&&(0,l.jsxs)("div",{className:"mb-4 grid grid-cols-1 sm:grid-cols-2 gap-3",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"label",children:"Start"}),(0,l.jsxs)("div",{className:"grid grid-cols-3 gap-2",children:[(0,l.jsx)("select",{className:"input",value:U,onChange:e=>P(e.target.value),children:o.map(e=>(0,l.jsx)("option",{value:e,children:e},e))}),(0,l.jsx)("select",{className:"input",value:L,onChange:e=>V(e.target.value),children:c.map(e=>(0,l.jsx)("option",{value:e,children:e},e))}),(0,l.jsx)("select",{className:"input",value:H,onChange:e=>R(e.target.value),children:m.map(e=>(0,l.jsx)("option",{value:e,children:e},e))})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"label",children:"End (optional)"}),(0,l.jsxs)("div",{className:"grid grid-cols-3 gap-2",children:[(0,l.jsx)("select",{className:"input",value:z,onChange:e=>W(e.target.value),children:o.map(e=>(0,l.jsx)("option",{value:e,children:e},e))}),(0,l.jsx)("select",{className:"input",value:F,onChange:e=>Z(e.target.value),children:c.map(e=>{let t=p(h(z,e,B))<=p(q);return(0,l.jsx)("option",{value:e,disabled:t,children:e},e)})}),(0,l.jsx)("select",{className:"input",value:B,onChange:e=>J(e.target.value),children:m.map(e=>(0,l.jsx)("option",{value:e,children:e},e))})]}),Q&&p(Q)<=p(q)&&(0,l.jsx)("div",{className:"mt-1 text-xs text-red-400",children:"End time must be after start time."})]})]}),(0,l.jsx)("div",{className:"my-4 h-px bg-white/10"}),(0,l.jsxs)("div",{className:"mb-4 flex items-center justify-between",children:[(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[(0,l.jsxs)("span",{className:"rounded-full bg-lime-400/20 text-lime-300 px-2 py-0.5 text-xs",children:[K," attending"]}),(0,l.jsx)("span",{className:"hidden sm:inline text-xs text-fg/60",children:"Updated 1h ago"})]}),(0,l.jsx)("button",{className:"rounded-lg bg-[#1E1E2E] px-3 py-1.5 text-sm text-primary hover:bg-primary/10",onClick:()=>N(e=>!e),children:f?"Close":"+ Add Player"})]}),(0,l.jsxs)("div",{className:"text-sm font-medium text-fg mb-2",children:["Kinsay muduwa? (",K,")"]}),(0,l.jsxs)("div",{className:"space-y-2",children:[0===K&&(0,l.jsx)("div",{className:"rounded-lg border border-white/10 bg-white/5 px-3 py-2 text-sm text-fg/70",children:"Walay mo duwa \uD83D\uDE22"}),b.attendees.map(e=>{var t,a;return(0,l.jsxs)("div",{className:"flex items-center justify-between rounded-xl bg-white/5 border border-white/10 px-3 py-2",children:[(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[(0,l.jsx)("div",{className:"grid h-9 w-9 place-items-center rounded-full bg-primary/10 text-primary font-semibold",children:e.name.split(" ").map(e=>e[0]).slice(0,2).join("").toUpperCase()}),(0,l.jsxs)("div",{className:"leading-tight",children:[(0,l.jsx)("div",{className:"font-medium text-fg",children:e.name}),(0,l.jsx)("div",{className:"text-xs text-fg/70",children:(null!=(t=e.status)?t:"confirmed")==="confirmed"?"Confirmed":(null!=(a=e.status)?a:"maybe")==="maybe"?"Maybe":"No"})]})]}),(0,l.jsx)("button",{onClick:()=>D({open:!0,id:e.id,name:e.name}),className:"h-7 w-7 grid place-items-center rounded-md bg-white/5 border border-white/10 text-fg/70 hover:text-fg",children:"\xd7"})]},e.id)})]}),f&&(0,l.jsxs)("div",{className:"mt-4 rounded-xl bg-white/5 border border-white/10 p-3",children:[(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-2",children:[(0,l.jsx)("input",{className:"input md:col-span-2",placeholder:"Player name",value:j,onChange:e=>E(e.target.value)}),(0,l.jsxs)("select",{className:"input",value:y,onChange:e=>w(e.target.value),children:[(0,l.jsx)("option",{value:"confirmed",children:"Confirmed"}),(0,l.jsx)("option",{value:"maybe",children:"Maybe"}),(0,l.jsx)("option",{value:"no",children:"No"})]})]}),(0,l.jsxs)("div",{className:"mt-3 flex justify-end gap-2",children:[(0,l.jsx)("button",{className:"btn-ghost",onClick:()=>{E(""),w("confirmed"),N(!1)},children:"Cancel"}),(0,l.jsx)("button",{className:"btn-primary",onClick:()=>{let e=j.trim();e&&(v({type:"ADD_ATTENDEE",payload:{eventId:b.id,attendee:{id:crypto.randomUUID(),name:e,status:y}}}),E(""),w("confirmed"),N(!1))},children:"Add Player"})]})]})]})})]})})}),(0,l.jsx)(s.A,{open:S,onClose:()=>C(!1),children:(0,l.jsxs)("div",{className:"w-full max-w-[92vw] md:max-w-[420px] bg-[#1E1E2E] rounded-2xl overflow-hidden",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between px-4 py-3 border-b border-white/10",children:[(0,l.jsx)("div",{className:"text-base font-semibold text-fg",children:"Delete event?"}),(0,l.jsx)("button",{"aria-label":"Close",onClick:()=>C(!1),className:"h-8 w-8 grid place-items-center rounded-md bg-[#1E1E2E] border border-white/10 text-fg/80 hover:bg-white/10",children:"\xd7"})]}),(0,l.jsxs)("div",{className:"p-4 md:p-5",children:[(0,l.jsx)("div",{className:"rounded-xl bg-black border border-white/10 p-4",children:(0,l.jsxs)("p",{className:"text-sm text-fg/80",children:["This will permanently remove ",(0,l.jsx)("span",{className:"font-semibold",children:null!=(t=b.court)?t:"Event"})," on ",d(b.dateISO),"."]})}),(0,l.jsxs)("div",{className:"mt-4 flex justify-end gap-2",children:[(0,l.jsx)("button",{className:"btn-ghost",onClick:()=>C(!1),children:"Cancel"}),(0,l.jsx)("button",{className:"rounded-lg px-3 py-1.5 text-sm bg-red-600 text-white hover:bg-red-700",onClick:()=>{v({type:"DELETE_EVENT",payload:{eventId:b.id}}),C(!1),v({type:"CLOSE_DETAILS"}),v({type:"SHOW_TOAST",payload:"Event deleted"}),setTimeout(()=>v({type:"CLEAR_TOAST"}),3e3)},children:"Delete"})]})]})]})}),(0,l.jsx)(s.A,{open:T.open,onClose:()=>D({open:!1}),children:(0,l.jsxs)("div",{className:"w-full max-w-[92vw] md:max-w-[420px] bg-[#1E1E2E] rounded-2xl overflow-hidden",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between px-4 py-3 border-b border-white/10",children:[(0,l.jsx)("div",{className:"text-base font-semibold text-fg",children:"Remove player?"}),(0,l.jsx)("button",{"aria-label":"Close",onClick:()=>D({open:!1}),className:"h-8 w-8 grid place-items-center rounded-md bg-[#1E1E2E] border border-white/10 text-fg/80 hover:bg-white/10",children:"\xd7"})]}),(0,l.jsxs)("div",{className:"p-4 md:p-5",children:[(0,l.jsx)("div",{className:"rounded-xl bg-black border border-white/10 p-4",children:(0,l.jsxs)("p",{className:"text-sm text-fg/80",children:["This will remove ",(0,l.jsx)("span",{className:"font-semibold",children:null!=(a=T.name)?a:"this player"})," from the attendee list."]})}),(0,l.jsxs)("div",{className:"mt-4 flex justify-end gap-2",children:[(0,l.jsx)("button",{className:"btn-ghost",onClick:()=>D({open:!1}),children:"Cancel"}),(0,l.jsx)("button",{className:"rounded-lg px-3 py-1.5 text-sm bg-red-600 text-white hover:bg-red-700",onClick:()=>{if(T.id){var e;v({type:"REMOVE_ATTENDEE",payload:{eventId:b.id,attendeeId:T.id}}),v({type:"SHOW_TOAST",payload:"Removed ".concat(null!=(e=T.name)?e:"player")}),setTimeout(()=>v({type:"CLEAR_TOAST"}),2e3)}D({open:!1})},children:"Remove"})]})]})]})})]})}},4046:(e,t,a)=>{"use strict";a.d(t,{CalendarProvider:()=>S,_:()=>C});var l=a(2115),s=a(2553),n=a(4585),r=a(9708);let d=(0,r.aU)(n.y),i="events";async function o(e){var t;let a=(0,r.H9)((0,r.rJ)(d,i),e.id),l=null==(t=(0,s.xI)(n.y).currentUser)?void 0:t.uid,o=h({...e,...l?{ownerUid:l}:{},updatedAt:r.Dc.fromMillis(Date.now())});await (0,r.BN)(a,o,{merge:!0})}async function c(e){await (0,r.kd)((0,r.H9)(d,i,e))}async function m(e,t){var a;let l=(0,r.H9)(d,i,e),s=await (0,r.x7)(l);if(!s.exists())return;let n=[...null!=(a=s.data().attendees)?a:[],t];await (0,r.mZ)(l,h({attendees:n,updatedAt:r.Dc.fromMillis(Date.now())}))}async function u(e,t){var a;let l=(0,r.H9)(d,i,e),s=await (0,r.x7)(l);if(!s.exists())return;let n=(null!=(a=s.data().attendees)?a:[]).filter(e=>e.id!==t);await (0,r.mZ)(l,h({attendees:n,updatedAt:r.Dc.fromMillis(Date.now())}))}function h(e){let t=e=>{if(Array.isArray(e))return e.map(t);if(null!==e&&"object"==typeof e){let a={};for(let[l,s]of Object.entries(e)){let e=t(s);void 0!==e&&(a[l]=e)}return a}return void 0===e?void 0:e};return t(e)}let p="naayduwa:calendar";function x(e){localStorage.setItem(p,JSON.stringify(e))}function v(e){return e.toISOString().slice(0,10)}function g(e){return v(new Date(Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),1)))}function b(e){return e instanceof Error?e.message:String(e)}let f=null;function N(e){f&&(f({type:"SHOW_TOAST",payload:e}),setTimeout(()=>f&&f({type:"CLEAR_TOAST"}),3e3))}let j=v(new Date),E=function(e){let t=localStorage.getItem(p);return t?JSON.parse(t):e}({monthCursorISO:g(new Date),selectedDateISO:j,events:[],modal:{addEventOpen:!1},toastMessage:null});function y(e,t){switch(t.type){case"INIT_EVENTS":{let a={...e,events:t.payload};return x(a),a}case"NAV_MONTH":{let a=new Date(e.monthCursorISO+"T00:00:00Z");a.setUTCMonth(a.getUTCMonth()+t.payload);let l=g(a),s={...e,monthCursorISO:l};return x(s),s}case"SET_SELECTED_DATE":{let a={...e,selectedDateISO:t.payload};return x(a),a}case"OPEN_ADD_EVENT":{let a={...e,modal:{...e.modal,addEventOpen:!0},selectedDateISO:t.payload};return x(a),a}case"CLOSE_ADD_EVENT":{let t={...e,modal:{...e.modal,addEventOpen:!1}};return x(t),t}case"ADD_EVENT":{o(t.payload).catch(e=>{console.error("Add event failed:",e),N("Add failed: ".concat(b(e)))});let a={...e,modal:{...e.modal,addEventOpen:!1}};return x(a),a}case"OPEN_DETAILS":{let a={...e,modal:{...e.modal,detailsEventId:t.payload}};return x(a),a}case"CLOSE_DETAILS":{let t={...e,modal:{...e.modal,detailsEventId:void 0}};return x(t),t}case"ADD_ATTENDEE":return m(t.payload.eventId,t.payload.attendee).catch(e=>{console.error("Add attendee failed:",e),N("Add attendee failed: ".concat(b(e)))}),e;case"REMOVE_ATTENDEE":return u(t.payload.eventId,t.payload.attendeeId).catch(e=>{console.error("Remove attendee failed:",e),N("Remove attendee failed: ".concat(b(e)))}),e;case"DELETE_EVENT":{c(t.payload.eventId).catch(e=>{console.error("Delete event failed:",e),N("Delete failed: ".concat(b(e)))});let a={...e,modal:{...e.modal,detailsEventId:void 0}};return x(a),a}case"UPDATE_EVENT":{o(t.payload.event).catch(e=>{console.error("Update event failed:",e),N("Update failed: ".concat(b(e)))});let a=e.events.map(e=>e.id===t.payload.event.id?t.payload.event:e),l={...e,events:a};return x(l),l}case"SHOW_TOAST":{let a={...e,toastMessage:t.payload};return x(a),a}case"CLEAR_TOAST":{let t={...e,toastMessage:null};return x(t),t}default:return e}}let w=(0,l.createContext)(null);function S(e){let{children:t}=e,[a,s]=(0,l.useReducer)(y,E);f=s,l.useEffect(()=>{let e=function(e){let t=(0,r.P)((0,r.rJ)(d,i),(0,r.My)("dateISO"),(0,r.My)("startTime"));return(0,r.aQ)(t,t=>{let a=[];t.forEach(e=>{var t;let l,s=e.data(),n=s.updatedAt;l="number"==typeof n?n:n&&"function"==typeof n.toMillis?n.toMillis():Date.now(),a.push({...s,attendees:null!=(t=s.attendees)?t:[],id:e.id,updatedAt:l})}),e(a)})}(e=>{s({type:"INIT_EVENTS",payload:e})});return()=>e()},[]);let n=(0,l.useMemo)(()=>({state:a,dispatch:s}),[a]);return l.createElement(w.Provider,{value:n},t)}function C(){let e=(0,l.useContext)(w);if(!e)throw Error("useCalendar must be used within CalendarProvider");return e}},4465:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});var l=a(5155);function s(e){let{open:t,onClose:a,children:s}=e;return t?(0,l.jsx)("div",{className:"fixed inset-0 z-50 grid place-items-center bg-black/60 p-4",onClick:a,children:(0,l.jsx)("div",{className:"w-full max-w-md rounded-2xl bg-bg-card p-5 shadow-soft border border-white/10",onClick:e=>e.stopPropagation(),children:s})}):null}a(2115)},4585:(e,t,a)=>{"use strict";a.d(t,{j:()=>r,y:()=>n});var l=a(2078),s=a(2553);let n=(0,l.Dk)().length?(0,l.Dk)()[0]:(0,l.Wp)({apiKey:"AIzaSyD7_XOXmHNRH8vVtRQdODbsS5cEG2kYN_U",authDomain:"naayduwa.firebaseapp.com",projectId:"naayduwa",storageBucket:"naayduwa.firebasestorage.app",messagingSenderId:"641198466977",appId:"1:641198466977:web:4689ca314da4076f558de0"}),r=(0,s.xI)(n);(0,s.zK)(r).catch(e=>{console.error("Anonymous sign-in failed",e)})},5343:(e,t,a)=>{Promise.resolve().then(a.bind(a,9953)),Promise.resolve().then(a.bind(a,9068)),Promise.resolve().then(a.bind(a,831)),Promise.resolve().then(a.bind(a,6443))},6443:(e,t,a)=>{"use strict";a.d(t,{default:()=>n});var l=a(5155),s=a(4046);function n(){let{state:e,dispatch:t}=(0,s._)(),a=e.toastMessage;return a?(0,l.jsx)("div",{role:"status","aria-live":"polite",className:"fixed bottom-4 left-1/2 -translate-x-1/2 z-[200]",children:(0,l.jsx)("button",{onClick:()=>t({type:"CLEAR_TOAST"}),className:"rounded-lg bg-green-600/90 text-white px-4 py-2 text-sm shadow-lg border border-green-500/40 hover:bg-green-600",children:a})}):null}},9068:(e,t,a)=>{"use strict";a.d(t,{default:()=>d});var l=a(5155),s=a(2115),n=a(4465),r=a(4046);function d(){let{state:e,dispatch:t}=(0,r._)(),a=e.modal.addEventOpen,d=new Date().toISOString().slice(0,10),i=e.selectedDateISO&&e.selectedDateISO>=d?e.selectedDateISO:d,[o,c]=(0,s.useState)(i),m=e=>{let[t,a]=e.split(":").map(Number);return 60*t+a},u=(e,t)=>(e=>{let t=Math.floor(e%1440/60);return"".concat(String(t).padStart(2,"0"),":").concat(String(e%60).padStart(2,"0"))})(m(e)+t);(0,s.useEffect)(()=>{var t;let a=new Date().toISOString().slice(0,10),l=null!=(t=e.selectedDateISO)?t:a;c(l<a?a:l)},[e.selectedDateISO,a]);let[h,p]=(0,s.useState)("18:00"),[x,v]=(0,s.useState)(""),[g,b]=(0,s.useState)(""),[f,N]=(0,s.useState)(""),[j,E]=(0,s.useState)(null),y=!!x&&m(x)<=m(h),w=0===g.trim().length;return(0,l.jsx)(n.A,{open:a,onClose:()=>t({type:"CLOSE_ADD_EVENT"}),children:(0,l.jsx)("div",{className:"w-full max-w-[100vw] h-[100dvh] overflow-x-hidden rounded-none bg-[#1E1E2E] md:w-[720px] md:max-w-[720px] md:h-auto md:max-h-[80vh] md:rounded-2xl md:overflow-hidden",children:(0,l.jsxs)("div",{className:"flex h-full flex-col",children:[(0,l.jsxs)("div",{className:"sticky top-0 z-10 flex items-center justify-between border-b border-white/10 bg-[#1E1E2E] px-4 py-3 md:px-6 md:py-4",children:[(0,l.jsx)("div",{className:"text-base sm:text-lg font-semibold text-fg",children:"Add Event"}),(0,l.jsx)("button",{"aria-label":"Close",onClick:()=>t({type:"CLOSE_ADD_EVENT"}),className:"h-8 w-8 grid place-items-center rounded-md bg-[#1E1E2E] border border-white/10 text-fg/80 hover:bg-white/10",children:"\xd7"})]}),(0,l.jsx)("div",{className:"flex-1 overflow-y-auto px-4 py-4 md:px-6 md:py-6",children:(0,l.jsxs)("div",{className:"rounded-xl bg-black border border-white/10 p-4 md:p-6",children:[(0,l.jsxs)("div",{className:"grid gap-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"label",children:"Date"}),(0,l.jsx)("input",{className:"input",type:"date",value:o,min:d,onChange:e=>{let t=e.target.value;c(t<d?d:t)}})]}),(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"label",children:"Start"}),(0,l.jsx)("input",{className:"input",type:"time",step:"1800",min:"00:00",max:"23:30",value:h,onChange:e=>{let t=e.target.value;p(t),x&&m(x)<=m(t)&&v(u(t,30))}})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"label",children:"End (optional)"}),(0,l.jsx)("input",{className:"input",type:"time",step:"1800",min:u(h,30),max:"23:30",value:x,onChange:e=>{let t=e.target.value;t&&m(t)<=m(h)?v(u(h,30)):v(t)}}),x&&m(x)<=m(h)&&(0,l.jsx)("div",{className:"mt-1 text-xs text-red-400",children:"End time must be after start time."})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"label",children:"Court"}),(0,l.jsx)("input",{className:"input",value:g,onChange:e=>{let t=e.target.value;b(t),j&&t.trim().length>0&&E(null)},placeholder:"Magnum",required:!0,"aria-invalid":!!j,"aria-describedby":j?"court-error":void 0}),j&&(0,l.jsx)("div",{id:"court-error",className:"mt-1 text-xs text-red-400",children:"Court is required."})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"label",children:"Notes"}),(0,l.jsx)("input",{className:"input",value:f,onChange:e=>N(e.target.value),placeholder:"court number, fee, etc."})]})]}),(0,l.jsxs)("div",{className:"mt-5 flex justify-end gap-2",children:[(0,l.jsx)("button",{className:"btn-ghost",onClick:()=>t({type:"CLOSE_ADD_EVENT"}),children:"Cancel"}),(0,l.jsx)("button",{className:"btn-primary disabled:opacity-50 disabled:cursor-not-allowed",onClick:()=>{if(o<d||x&&m(x)<=m(h))return;let e=g.trim();if(!e)return void E("Court is required");let a=f.trim();t({type:"ADD_EVENT",payload:{id:crypto.randomUUID(),dateISO:o,startTime:h,...x?{endTime:x}:{},court:e,...a?{notes:a}:{},attendees:[],updatedAt:Date.now()}})},disabled:y||w,children:"Save"})]})]})})]})})})}},9953:(e,t,a)=>{"use strict";a.d(t,{default:()=>d});var l=a(5155),s=a(4046);function n(e){var t;let{ev:a}=e,{dispatch:n}=(0,s._)();if(!a)return null;let r=function(e){if(!e)return"";let[t,a]=e.split(":").map(Number);return Number.isNaN(t)||Number.isNaN(a)?"":"".concat((t+11)%12+1,":").concat(String(a).padStart(2,"0")," ").concat(t>=12?"PM":"AM")}(a.startTime),d=null!=(t=a.court)?t:"Event";return r||d?(0,l.jsx)("div",{role:"button",tabIndex:0,onClick:e=>{e.stopPropagation(),a.id&&n({type:"OPEN_DETAILS",payload:a.id})},onKeyDown:e=>{("Enter"===e.key||" "===e.key)&&(e.preventDefault(),e.currentTarget.click())},className:"w-full text-left cursor-pointer flex flex-col rounded bg-white/10 p-1 hover:bg-white/20 focus:outline-none",title:d,children:(0,l.jsxs)("div",{className:"min-w-0",children:[r&&(0,l.jsx)("div",{className:"text-[10px] font-semibold text-primary",children:r}),d&&(0,l.jsx)("div",{className:"truncate text-[10px] text-fg/80",children:d})]})}):null}function r(e){let{dateISO:t,isCurrentMonth:a}=e,{state:r,dispatch:d}=(0,s._)(),i=new Date().toISOString().slice(0,10),o=t===i,c=r.selectedDateISO===t,m=t<i,u=(r.events||[]).filter(e=>e&&e.dateISO===t);return(0,l.jsxs)("button",{onClick:()=>{m||(d({type:"SET_SELECTED_DATE",payload:t}),d({type:"OPEN_ADD_EVENT",payload:t}))},className:["relative w-full rounded-xl p-1.5 text-left transition h-24 sm:h-28 md:h-32 bg-white/[0.02] hover:bg-white/[0.1] hover:scale-[1.02] transition-transform",a?"":"opacity-50",c?"ring-2 ring-primary":"",o?"ring-1 ring-accent":"",m?"cursor-not-allowed":""].join(" "),title:m?"Past date":"Click to add event",children:[(0,l.jsx)("div",{className:"pointer-events-none absolute right-2 top-2 text-sm md:text-base font-semibold text-white",children:t.slice(-2)}),(0,l.jsx)("div",{className:"mt-4 flex flex-col gap-1",children:u.map(e=>(0,l.jsx)(n,{ev:e},e.id))})]})}function d(){let{state:e,dispatch:t}=(0,s._)(),a=function(e){let[t,a]=e.split("-").map(Number),l=new Date(Date.UTC(t,a-1,1)).getUTCDay(),s=new Date(t,a,0).getDate(),n=[];for(let e=l-1;e>=0;e--){let l=new Date(Date.UTC(t,a-1,-e));n.push({dateISO:l.toISOString().slice(0,10),isCurrentMonth:!1})}let r=[];for(let e=1;e<=s;e++){let l=new Date(Date.UTC(t,a-1,e));r.push({dateISO:l.toISOString().slice(0,10),isCurrentMonth:!0})}let d=(7-(n.length+r.length)%7)%7,i=[];for(let e=1;e<=d;e++){let l=new Date(Date.UTC(t,a-1,s+e));i.push({dateISO:l.toISOString().slice(0,10),isCurrentMonth:!1})}return[...n,...r,...i]}(e.monthCursorISO);return(0,l.jsxs)("div",{className:"w-full bg-black p-0 md:p-6 border-0 md:border md:border-white/8 md:shadow-soft",children:[(0,l.jsxs)("div",{className:"mb-3 flex items-center justify-center gap-4",children:[(0,l.jsx)("button",{"aria-label":"Previous month",onClick:()=>t({type:"NAV_MONTH",payload:-1}),className:"grid h-9 w-9 sm:h-10 sm:w-10 rounded-md bg-gray-700 text-white hover:bg-gray-600 transition place-items-center",children:"‹"}),(0,l.jsx)("h2",{className:"text-xl sm:text-3xl font-semibold tracking-wide text-fg leading-tight",children:(e=>{let[t,a]=e.split("-").map(Number),l=new Date(Date.UTC(t,(null!=a?a:1)-1,1));return new Intl.DateTimeFormat("en-US",{month:"long",year:"numeric",timeZone:"UTC"}).format(l)})(e.monthCursorISO)}),(0,l.jsx)("button",{"aria-label":"Next month",onClick:()=>t({type:"NAV_MONTH",payload:1}),className:"grid h-9 w-9 sm:h-10 sm:w-10 rounded-md bg-gray-700 text-white hover:bg-gray-600 transition place-items-center",children:"›"})]}),(0,l.jsxs)("div",{className:"overflow-hidden rounded-none md:border md:border-white/10",children:[(0,l.jsx)("div",{className:"grid grid-cols-7 bg-[#1E1E2E]",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(e=>(0,l.jsxs)("div",{className:"px-2 py-1 text-center text-xs sm:text-sm font-semibold uppercase text-fg",children:[(0,l.jsx)("span",{className:"hidden sm:inline",children:e}),(0,l.jsx)("span",{className:"sm:hidden",children:e[0]})]},e))}),(0,l.jsx)("div",{className:"grid grid-cols-7 gap-px bg-white/10",children:a.map(e=>(0,l.jsx)("div",{className:e.isCurrentMonth?"bg-black":"bg-[#21212E]",children:(0,l.jsx)(r,{dateISO:e.dateISO,isCurrentMonth:e.isCurrentMonth})},e.dateISO))})]})]})}}},e=>{e.O(0,[135,965,240,441,255,358],()=>e(e.s=5343)),_N_E=e.O()}]);