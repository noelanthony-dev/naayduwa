//helpers: clash checks, sorting, filters